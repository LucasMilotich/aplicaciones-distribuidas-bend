{"version":3,"sources":["../../../src/dist/clients/movieDBClient.js"],"names":["Object","defineProperty","exports","value","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","api_key","http","require","TheMovieDbClient","getImage","path","discoverMovies","options","Promise","resolve","reject","req","request","res","chunks","on","chunk","push","body","Buffer","concat","json","JSON","parse","console","log","results","forEach","element","poster_path","movies","err","write","end","findMovie","keyword"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar api_key = '71a4edb01b7d0d764e48e21bec96f77a';\n\nvar http = require(\"https\");\n\nvar TheMovieDbClient =\n/*#__PURE__*/\nfunction () {\n  function TheMovieDbClient() {\n    _classCallCheck(this, TheMovieDbClient);\n  }\n\n  _createClass(TheMovieDbClient, null, [{\n    key: \"getImage\",\n    value: function getImage(path) {\n      return \"https://image.tmdb.org/t/p/w200\" + path;\n    }\n  }, {\n    key: \"discoverMovies\",\n    value: function discoverMovies() {\n      var options = {\n        \"method\": \"GET\",\n        \"hostname\": \"api.themoviedb.org\",\n        \"port\": null,\n        \"path\": \"/3/discover/movie?page=1&include_video=false&include_adult=false&sort_by=popularity.desc&language=en-US&api_key=71a4edb01b7d0d764e48e21bec96f77a\",\n        \"headers\": {}\n      };\n      return new Promise(function (resolve, reject) {\n        var req = http.request(options, function (res) {\n          var chunks = [];\n          res.on(\"data\", function (chunk) {\n            chunks.push(chunk);\n          });\n          res.on(\"end\", function () {\n            var body = Buffer.concat(chunks);\n            var json = {};\n\n            try {\n              json = JSON.parse(body);\n              console.log(\"el json es: \" + json);\n              json.results.forEach(function (element) {\n                element.poster_path = TheMovieDbClient.getImage(element.poster_path);\n              });\n              resolve({\n                movies: json.results\n              });\n            } catch (err) {\n              console.log(\"El error es \" + err);\n              reject(err);\n            }\n          });\n        });\n        req.on('error', function (err) {\n          // This is not a \"Second reject\", just a different sort of failure\n          console.log(err);\n          reject(err);\n        });\n        req.write(\"{}\");\n        req.end();\n      });\n    }\n  }, {\n    key: \"findMovie\",\n    value: function findMovie(keyword) {\n      var options = {\n        \"method\": \"GET\",\n        \"hostname\": \"api.themoviedb.org\",\n        \"port\": null,\n        \"path\": \"/3/search/movie?include_adult=false&page=1&query=\".concat(keyword, \"&language=en-US&api_key=71a4edb01b7d0d764e48e21bec96f77a\"),\n        \"headers\": {}\n      };\n      console.log(options);\n      return new Promise(function (resolve, reject) {\n        var req = http.request(options, function (res) {\n          var chunks = [];\n          res.on(\"data\", function (chunk) {\n            chunks.push(chunk);\n          });\n          res.on(\"end\", function () {\n            var body = Buffer.concat(chunks);\n            var json;\n\n            try {\n              json = JSON.parse(body);\n              console.log(json);\n              json.results.forEach(function (element) {\n                element.poster_path = TheMovieDbClient.getImage(element.poster_path);\n              });\n              resolve({\n                movies: json.results\n              });\n            } catch (err) {\n              reject(err);\n            }\n          });\n        });\n        req.on('error', function (err) {\n          // This is not a \"Second reject\", just a different sort of failure\n          console.log(err);\n          reject(err);\n        });\n        req.write(\"{}\");\n        req.end();\n      });\n    }\n  }]);\n\n  return TheMovieDbClient;\n}();\n\nexports[\"default\"] = TheMovieDbClient;"],"file":"movieDBClient.js"}