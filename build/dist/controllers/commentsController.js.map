{"version":3,"sources":["../../../dist/controllers/commentsController.js"],"names":["Object","defineProperty","exports","value","_mongo","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","errorBuilder","CommentsController","getCommentsByMovie","req","res","next","movieId","parseInt","params","mongo","getAll","movie_id","then","elem","console","log","send","comments","saveComment","username","body","comment","save"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _mongo = _interopRequireDefault(require(\"../db/mongo\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar errorBuilder = require('../domain/error');\n\nvar CommentsController =\n/*#__PURE__*/\nfunction () {\n  function CommentsController() {\n    _classCallCheck(this, CommentsController);\n  }\n\n  _createClass(CommentsController, [{\n    key: \"getCommentsByMovie\",\n    value: function getCommentsByMovie(req, res, next) {\n      var movieId = parseInt(req.params.movieId, 10);\n      var mongo = new _mongo[\"default\"]();\n      mongo.getAll(\"comments\", {\n        movie_id: movieId\n      }).then(function (elem) {\n        console.log(elem);\n\n        if (elem == null) {\n          res.send(errorBuilder(\"comments not found\", 400, \"not_found\"));\n        } else {\n          res.send({\n            comments: elem\n          });\n        }\n      });\n    }\n  }, {\n    key: \"saveComment\",\n    value: function saveComment(req, res, next) {\n      var username = req.body.username;\n      var comment = req.body.comment;\n      var movieId = req.body.movie_id;\n      var mongo = new _mongo[\"default\"]();\n      mongo.save(\"comments\", {\n        username: username,\n        comment: comment,\n        movie_id: movieId\n      }).then(function (elem) {\n        console.log(elem);\n\n        if (elem == null) {\n          res.send(errorBuilder(\"error in comment\", 500, \"error\"));\n        } else {\n          res.send(elem);\n        }\n      });\n    }\n  }]);\n\n  return CommentsController;\n}();\n\nexports[\"default\"] = CommentsController;"],"file":"commentsController.js"}