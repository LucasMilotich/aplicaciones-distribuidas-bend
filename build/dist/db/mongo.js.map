{"version":3,"sources":["../../../dist/db/mongo.js"],"names":["Object","defineProperty","exports","value","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","MongoClient","require","Mongo","buildConnection","Promise","resolve","reject","connect","err","client","console","log","db","get","collection","query","then","JSON","stringify","findOne","items","getAll","find","toArray","result","save","element","insert","update","elementToUpdate","newElement","elem","_delete","elementToDelete","deleteOne"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar MongoClient = require('mongodb').MongoClient;\n\nvar Mongo =\n/*#__PURE__*/\nfunction () {\n  function Mongo() {\n    _classCallCheck(this, Mongo);\n  }\n\n  _createClass(Mongo, [{\n    key: \"buildConnection\",\n    value: function buildConnection() {\n      return new Promise(function (resolve, reject) {\n        MongoClient.connect(\"mongodb+srv://admin:admin@cluster0-rwppz.mongodb.net/test?retryWrites=true&w=majority\", function (err, client) {\n          //MongoClient.connect(\"mongodb://admin:admin@localhost:32772\", (err, client) => {\n          console.log(\"Conectando a mongo\");\n          if (err) return console.log(err);\n          resolve(client.db('test'));\n        });\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(collection, query) {\n      var instance = this;\n      return new Promise(function (resolve, reject) {\n        instance.buildConnection().then(function (db) {\n          console.log(\"query to execute\" + JSON.stringify(query));\n          console.log(\"collection \" + collection);\n          db.collection(collection).findOne(query, function (err, items) {\n            if (err) reject(err);\n            console.log(items);\n            resolve(items);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"getAll\",\n    value: function getAll(collection, query) {\n      var instance = this;\n      return new Promise(function (resolve, reject) {\n        instance.buildConnection().then(function (db) {\n          console.log(\"query to execute\" + JSON.stringify(query));\n          console.log(\"collection \" + collection);\n          db.collection(collection).find(query).toArray(function (err, result) {\n            if (err) throw err;\n            console.log(result);\n            resolve(result);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"save\",\n    value: function save(collection, element) {\n      var instance = this;\n      return new Promise(function (resolve, reject) {\n        instance.buildConnection().then(function (db) {\n          console.log(\"query to execute\" + JSON.stringify(element));\n          console.log(\"collection \" + collection);\n          db.collection(collection).insert(element, function (err, items) {\n            if (err) reject(err);\n            console.log(element);\n            resolve(element);\n          });\n        });\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(collection, elementToUpdate, newElement) {\n      var instance = this;\n      return new Promise(function (resolve, reject) {\n        console.log(\"before deleted\");\n        instance[\"delete\"](collection, elementToUpdate).then(function (elem) {\n          console.log(\"deleted \" + elem);\n          instance.buildConnection().then(function (db) {\n            console.log(\"to update\" + JSON.stringify(newElement));\n            console.log(\"collection \" + collection);\n            instance[\"delete\"](collection, elementToUpdate).then(function () {\n              db.collection(collection).insert(newElement, function (err, items) {\n                if (err) reject(err);\n                console.log(newElement);\n                resolve(newElement);\n              });\n            });\n          });\n        })[\"catch\"](function (err) {\n          console.log(err);\n        });\n      });\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(collection, elementToDelete) {\n      var instance = this;\n      console.log(\"before delete 0 \");\n      return new Promise(function (resolve, reject) {\n        console.log(\"before delete 1 \");\n        instance.buildConnection().then(function (db) {\n          console.log(\"to delete\" + JSON.stringify(elementToDelete));\n          console.log(\"collection \" + collection);\n          db.collection(collection).deleteOne(elementToDelete, elementToDelete, function (err, items) {\n            if (err) reject(err);\n            console.log(elementToDelete);\n            resolve(elementToDelete);\n          });\n        });\n      });\n    }\n  }]);\n\n  return Mongo;\n}();\n\nexports[\"default\"] = Mongo;"],"file":"mongo.js"}